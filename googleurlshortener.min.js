/*!
* GoogleURLShortener ver 0.1
* by Zzbaivong <http://devs.forumvi.com/>
*/
(function(c){c.GoogleURLShortener=function(h){var b=c.extend({key:null,mode:"auto",url:null,success:function(b,a){},error:function(b,a){}},h),g=function(a){b.error(a,{error:{code:400,message:a,data:[{domain:"global",reason:"Invalid",message:a}]}})},a=b.url;""!==a&&/^(https?:\/\/)([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(a)&&!/^http:\/\/goo\.gl\/?$/.test(a)?(window.gapi_onload=function(c){var e=gapi.client;e.setApiKey(b.key);e.load("urlshortener","v1",function(d){if("object"==typeof d)b.error(d.error.message,d);else{d=b.mode;var c,f;"auto"==d&&(d=/http:\/\/goo\.gl\/.+/.test(a)?"shortUrl":"longUrl");switch(d){case "longUrl":c=e.urlshortener.url.insert({resource:{longUrl:a}});f="id";break;case "shortUrl":c=e.urlshortener.url.get({shortUrl:a}),f="longUrl"}c?c.execute(function(a){a.error?b.error(a.error.message,a):null!==a[f]?b.success(a[f],a):b.error(a.error.message,a)}):g("Invalid Setting")}})},c.getScript("https://apis.google.com/js/client.js")):g("Invalid Value")}})(jQuery);
